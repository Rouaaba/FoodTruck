{% extends "base.html" %}

{% block title %}Health Check - SF Food Trucks{% endblock %}

{% block extra_css %}
<style>
    .status-card {
        background: #2a2a2a;
        border-radius: 15px;
        padding: 3rem;
        text-align: center;
        margin: 2rem auto;
        max-width: 600px;
    }

    .status-card.healthy {
        border: 2px solid #4ade80;
    }

    .status-card.unhealthy {
        border: 2px solid #ef4444;
    }

    .status-icon {
        font-size: 5rem;
        margin-bottom: 1rem;
    }

    .status-title {
        font-size: 2.5rem;
        text-transform: uppercase;
        margin-bottom: 1rem;
    }

    .status-title.healthy {
        color: #4ade80;
    }

    .status-title.unhealthy {
        color: #ef4444;
    }

    .status-details {
        background: #1a1a1a;
        border: 1px solid #444;
        border-radius: 10px;
        padding: 1.5rem;
        margin-top: 2rem;
        text-align: left;
    }

    .status-row {
        display: flex;
        justify-content: space-between;
        padding: 0.75rem 0;
        border-bottom: 1px solid #444;
    }

    .status-row:last-child {
        border-bottom: none;
    }

    .status-label {
        color: #aaa;
        font-weight: 600;
    }

    .status-value {
        color: #fded39;
        font-weight: 600;
    }

    .refresh-btn {
        background: #fded39;
        color: #1a1a1a;
        padding: 1rem 2rem;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        text-transform: uppercase;
        cursor: pointer;
        margin-top: 2rem;
        transition: transform 0.2s;
    }

    .refresh-btn:hover {
        transform: translateY(-2px);
    }
</style>
{% endblock %}

{% block content %}
<div class="page-content">
    <div class="content-card">
        <h1>System Health Check üè•</h1>
        <p>Monitor the status of SF Food Trucks application and its dependencies.</p>

        <div class="status-card {% if data.status == 'healthy' %}healthy{% else %}unhealthy{% endif %}">
            <div class="status-icon">
                {% if data.status == 'healthy' %}
                    ‚úÖ
                {% else %}
                    ‚ùå
                {% endif %}
            </div>
            <h2 class="status-title {% if data.status == 'healthy' %}healthy{% else %}unhealthy{% endif %}">{{ data.status | upper }}</h2>
            <p style="color: #aaa; margin: 0;">All systems {{ 'operational' if data.status == 'healthy' else 'experiencing issues' }}</p>

            <div class="status-details">
                <div class="status-row">
                    <span class="status-label">Service:</span>
                    <span class="status-value">{{ data.service }}</span>
                </div>
                <div class="status-row">
                    <span class="status-label">Elasticsearch:</span>
                    <span class="status-value">{{ data.elasticsearch }}</span>
                </div>
                <div class="status-row">
                    <span class="status-label">Status:</span>
                    <span class="status-value">{{ data.status }}</span>
                </div>
            </div>

            <button class="refresh-btn" onclick="location.reload()">
                üîÑ Refresh Status
            </button>
        </div>

        <div style="background: #2a2a2a; border: 1px solid #444; border-radius: 10px; padding: 1.5rem; margin-top: 2rem;">
            <h3 style="color: #fded39; margin-bottom: 1rem;">API Access</h3>
            <p style="color: #aaa; margin: 0;">Get JSON response: <code style="background: #1a1a1a; padding: 0.25rem 0.5rem; border-radius: 4px; color: #fded39;">/health?format=json</code></p>
        </div>
    </div>
</div>
{% endblock %}